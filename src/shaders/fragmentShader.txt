precision mediump float;

varying vec2 coordinates;
void main()
{
    float r = 1.0;

    vec2 xy = coordinates * vec2(2,2);

    vec2 z = vec2(0,0);
    vec2 z2 = vec2(0,0);

    for( float count = 0.0; count <= 10000.0; count++){
        z = mat2(z,-z[1],z[0])*z + xy;
        if(length(z) > 4.0){
            r = 1.0 - 10.0 / count;
            break;
        }
    }

    gl_FragColor = vec4(r, 0, 0, 1.0);
}
